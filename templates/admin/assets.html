{% extends 'admin/base.html' %}
{% block title %}Assets{% endblock %}
{% block page_title %}Assets Management{% endblock %}

{% block content %}
<!-- Section Explanation -->
<div class="content-card"
    style="background: linear-gradient(135deg, #dd6b20 0%, #c05621 100%); color: white; margin-bottom: 25px;">
    <h2 style="border: none; color: white; margin-bottom: 10px;"><i class="fas fa-camera"></i> Assets Management</h2>
    <p style="opacity: 0.9; margin: 0;">This section tracks all your business equipment and property. Record your
        cameras, lenses, computers, and other valuable items here. This helps you know the total value of your business
        and keep an inventory of what you own.</p>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <h3><i class="fas fa-camera"></i> Total Asset Value</h3>
        <div class="value">UGX {{ "{:,.0f}".format(total) }}</div>
        <small class="text-muted">Total worth of all your equipment</small>
    </div>
</div>

<div class="content-card">
    <h2><i class="fas fa-plus-circle"></i> Add New Asset</h2>
    <p class="text-muted" style="margin-bottom: 20px;"><strong>How to use:</strong> Add each piece of equipment or
        property you own. Record the name, type, value (what you paid or current worth), and where you bought it. This
        creates an inventory of your business assets.</p>
    <form action="{{ url_for('admin.add_asset') }}" method="POST">
        <div class="form-row">
            <div class="form-group">
                <label for="name">Asset Name <small style="color: #718096;">(What is the item?)</small></label>
                <input type="text" id="name" name="name" placeholder="e.g., Canon EOS R5" required>
            </div>
            <div class="form-group">
                <label for="category">Category <small style="color: #718096;">(Type of equipment)</small></label>
                <select id="category" name="category" required>
                    <option value="">Select category</option>
                    <option value="Camera">Camera (body)</option>
                    <option value="Lens">Lens</option>
                    <option value="Lighting">Lighting (flashes, softboxes)</option>
                    <option value="Audio">Audio (microphones, recorders)</option>
                    <option value="Tripod/Support">Tripod/Support (stands, gimbals)</option>
                    <option value="Computer">Computer (laptop, desktop)</option>
                    <option value="Storage">Storage (hard drives, memory cards)</option>
                    <option value="Drone">Drone</option>
                    <option value="Accessories">Accessories (bags, straps, batteries)</option>
                    <option value="Furniture">Furniture (desk, chair, backdrop)</option>
                    <option value="Vehicle">Vehicle (car, motorcycle)</option>
                    <option value="Other">Other</option>
                </select>
            </div>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label for="value">Value (UGX) <small style="color: #718096;">(How much is it worth?)</small></label>
                <input type="number" id="value" name="value" min="0" step="1000" placeholder="e.g., 5000000" required>
            </div>
            <div class="form-group">
                <label for="supplier">Supplier <small style="color: #718096;">(Where did you buy it?)</small></label>
                <input type="text" id="supplier" name="supplier" placeholder="e.g., Camera Center Kampala">
            </div>
        </div>
        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Add Asset</button>
    </form>
</div>

<div class="content-card">
    <h2><i class="fas fa-list"></i> Asset Inventory</h2>
    <p class="text-muted" style="margin-bottom: 20px;">All your business assets are listed below. This is your equipment
        inventory - keep it updated when you buy new items or sell old ones.</p>
    {% if records %}
    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Category</th>
                <th>Value</th>
                <th>Supplier</th>
                <th>Date Added</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for r in records %}
            <tr>
                <td><strong>{{ r['name'] }}</strong></td>
                <td>{{ r['category'] }}</td>
                <td>UGX {{ "{:,.0f}".format(r['value']) }}</td>
                <td>{{ r['supplier'] or '-' }}</td>
                <td>{{ r['created_at'][:10] if r['created_at'] else '-' }}</td>
                <td>
                    <a href="{{ url_for('admin.delete_asset', id=r['id']) }}" class="btn btn-danger btn-sm"
                        onclick="return confirm('Are you sure you want to delete this asset from your inventory?')"><i
                            class="fas fa-trash"></i></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-muted">No assets registered yet. Add your cameras, lenses, and other equipment using the form above!
    </p>
    {% endif %}
</div>
{% endblock %}