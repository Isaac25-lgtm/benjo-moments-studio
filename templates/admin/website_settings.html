{% extends 'admin/base.html' %}
{% block title %}Website Settings{% endblock %}
{% block page_title %}Website Settings{% endblock %}

{% block content %}
<!-- Section Explanation -->
<div class="content-card"
    style="background: linear-gradient(135deg, #718096 0%, #4a5568 100%); color: white; margin-bottom: 25px;">
    <h2 style="border: none; color: white; margin-bottom: 10px;"><i class="fas fa-cog"></i> Website Settings</h2>
    <p style="opacity: 0.9; margin: 0;">This section controls the text and contact information displayed on your public
        website. Any changes you make here will appear on the website immediately after you click "Save Changes".</p>
</div>

<div class="content-card">
    <h2><i class="fas fa-edit"></i> Edit Website Content</h2>
    <p class="text-muted" style="margin-bottom: 20px;"><strong>How to use:</strong> Update any of the fields below to
        change what appears on your website. Click "Save Changes" when done, then click "Preview Website" to see how it
        looks.</p>

    <form action="{{ url_for('admin.update_settings') }}" method="POST">
        <div class="form-row">
            <div class="form-group">
                <label for="site_name">Site Name <small style="color: #718096;">(Your business name)</small></label>
                <input type="text" id="site_name" name="site_name"
                    value="{{ settings['site_name'] if settings else 'Benjo Moments' }}" required>
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: #4a5568; font-size: 16px;"><i class="fas fa-home"></i> Homepage Hero
            Section</h3>
        <p class="text-muted" style="margin-bottom: 15px;">The big text that visitors see first when they open your
            website.</p>
        <div class="form-row">
            <div class="form-group">
                <label for="hero_text">Hero Title <small style="color: #718096;">(Main headline)</small></label>
                <input type="text" id="hero_text" name="hero_text"
                    value="{{ settings['hero_text'] if settings else '' }}"
                    placeholder="e.g., Capturing Your Precious Moments">
            </div>
            <div class="form-group">
                <label for="hero_subtext">Hero Subtitle <small style="color: #718096;">(Smaller text below
                        title)</small></label>
                <input type="text" id="hero_subtext" name="hero_subtext"
                    value="{{ settings['hero_subtext'] if settings else '' }}"
                    placeholder="e.g., Professional Photography Services">
            </div>
        </div>

        <h3 style="margin: 25px 0 15px; color: #4a5568; font-size: 16px;"><i class="fas fa-info-circle"></i> About
            Section</h3>
        <p class="text-muted" style="margin-bottom: 15px;">Tell visitors about your photography business and what makes
            you special.</p>
        <div class="form-group">
            <label for="about_text">About Us Text <small style="color: #718096;">(Your business story)</small></label>
            <textarea id="about_text" name="about_text" rows="5" style="width: 100%;"
                placeholder="Write about your business, experience, and what makes you unique...">{{ settings['about_text'] if settings else '' }}</textarea>
        </div>

        <h3 style="margin: 25px 0 15px; color: #4a5568; font-size: 16px;"><i class="fas fa-phone"></i> Contact
            Information</h3>
        <p class="text-muted" style="margin-bottom: 15px;">How clients can reach you - this appears in the footer and
            contact page.</p>
        <div class="form-row">
            <div class="form-group">
                <label for="contact_phone">Phone Number <small style="color: #718096;">(Your business
                        phone)</small></label>
                <input type="text" id="contact_phone" name="contact_phone"
                    value="{{ settings['contact_phone'] if settings else '' }}" placeholder="+256 7xx xxx xxx">
            </div>
            <div class="form-group">
                <label for="contact_email">Email Address <small style="color: #718096;">(Your business
                        email)</small></label>
                <input type="email" id="contact_email" name="contact_email"
                    value="{{ settings['contact_email'] if settings else '' }}" placeholder="info@example.com">
            </div>
            <div class="form-group">
                <label for="address">Address <small style="color: #718096;">(Your location)</small></label>
                <input type="text" id="address" name="address" value="{{ settings['address'] if settings else '' }}"
                    placeholder="e.g., Kampala, Uganda">
            </div>
        </div>

        <div style="margin-top: 25px;">
            <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
            <a href="{{ url_for('public.index') }}" target="_blank" class="btn btn-success"
                style="margin-left: 10px;"><i class="fas fa-external-link-alt"></i> Preview Website</a>
        </div>
    </form>
</div>

<!-- Hero Slider Images Manager -->
<div class="content-card">
    <h2><i class="fas fa-images"></i> Hero Slider Images</h2>
    <p class="text-muted" style="margin-bottom: 20px;"><strong>How to use:</strong> These are the big background images
        that slide on the homepage behind your hero text. Upload your best photos here. If no images are uploaded,
        default stock photos will be shown.</p>

    <!-- Upload Form -->
    <form action="{{ url_for('admin.upload_hero_image') }}" method="POST" enctype="multipart/form-data"
        style="margin-bottom: 25px; padding: 20px; background: #f7fafc; border-radius: 8px;">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <div class="form-row">
            <div class="form-group">
                <label for="hero_image">Choose Image <small style="color: #718096;">(JPG, PNG, WEBP - high resolution recommended)</small></label>
                <input type="file" id="hero_image" name="hero_image" accept="image/*" required>
            </div>
            <div class="form-group">
                <label for="display_order">Display Order <small style="color: #718096;">(Lower number = shown first)</small></label>
                <input type="number" id="display_order" name="display_order" value="0" min="0">
            </div>
        </div>
        <button type="submit" class="btn btn-primary"><i class="fas fa-upload"></i> Upload Hero Image</button>
    </form>

    <!-- Current Hero Images -->
    {% if hero_images %}
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 15px;">
        {% for img in hero_images %}
        <div style="position: relative; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <img src="{{ url_for('public.hero_image_file', filename=img['filename']) }}"
                style="width: 100%; height: 160px; object-fit: cover; display: block;"
                alt="Hero slide {{ loop.index }}">
            <div style="padding: 10px; background: white; display: flex; justify-content: space-between; align-items: center;">
                <small style="color: #718096;">Order: {{ img['display_order'] }}</small>
                <form action="{{ url_for('admin.delete_hero_image', id=img['id']) }}" method="POST" style="display: inline;">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                    <button type="submit" class="btn btn-danger btn-sm"
                        onclick="return confirm('Delete this hero image?')">
                        <i class="fas fa-trash"></i>
                    </button>
                </form>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-muted"><i class="fas fa-info-circle"></i> No hero images uploaded yet. Default stock photos are being
        used. Upload your own photos above to replace them.</p>
    {% endif %}
</div>
{% endblock %}